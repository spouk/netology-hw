
# Домашнее задание к занятию «Микросервисы: принципы»

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры.
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: API Gateway 

Предложите решение для обеспечения реализации API Gateway. 
Составьте сравнительную таблицу возможностей различных программных решений. 
На основе таблицы сделайте выбор решения.


Решение должно соответствовать следующим требованиям:
- маршрутизация запросов к нужному сервису на основе конфигурации, (1)
- возможность проверки аутентификационной информации в запросах, (2)
- обеспечение терминации HTTPS. (3)

- [x] Write the press release
- [ ] Update the website
- [ ] Contact the media

Обоснуйте свой выбор.

| api gateway                                                       |    1    |   2   |  3   | release.l |
|:------------------------------------------------------------------|:-------:|:-----:|:----:|:---------:|
| yandex api gateway                                                |    +    |   +   |  +   |     -     
| google api gateway                                                |    +    |   +   |  +   |     -     |
| aws api gateway                                                   |    +    |   +   |  +   |     -     |
| nginx api gateway                                                 |    +    |   +   |  +   |     c     |
| tyk                                                               |    +    |   +   |  +   |go|
| gravitee                                                          |    +    |   +   |  +   |java|
| Goku API Gateway                                                  |    +    |   +   |  +   |go|
| KrakenD                                                           |    +    |   +   |  +   |go|
| Kong Gateway                                                             |    +    |   +   |  +   |lua|

из облачных решений я бы выбрал yandex api gateway - русскоязычная ТП, доступность, весьма адекватная ценовая политика
из "локальнохостовых" выбрал бы krakenD - реализован полностью на Go, позволяет разрабатывать собственные плагины для расширения/изменения имеющегося функционала, быстрый, как и все тулзы на Go минимально мороки с установкой/компиляцией и запуском, хорошо документирован


## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:
- поддержка кластеризации для обеспечения надёжности, (1)
- хранение сообщений на диске в процессе доставки, (2)
- высокая скорость работы, (3)
- поддержка различных форматов сообщений, (4)
- разделение прав доступа к различным потокам сообщений,(5)
- простота эксплуатации. (6)

Обоснуйте свой выбор.

| broker                      |  1  |   2   |       3       |  4  |  5  |   6    |
|:----------------------------|:---:|:-----:|:-------------:|:---:|:---:|:------:|
| apache kafka                | да  |   да   | очень быстрый | нет | да  | средне |
| redis                       | да  |   частично   |    быстрый    | нет | да  | просто |
| rabbitmq                    | да  |   да   |    средняя    | да  | да  | просто |
| Apache ActiveMQ             | да  |   да   |    средняя    | да  | да  | просто |
| ZeroMQ                      | да  |   да   | очень быстрый | нет | да  | просто |

Выбор брокера сообщений зависит 
+ контекста решаемой задачи
+ архитектуры конечного сервиса(ов)
+ количество обрабатываемых сообщений
+ наличие зависимости от скорости конечной обработки поступающих сообщений
+ наличия персистентности поступающих сообщений 

в общем случае для начального "монолита" который в дальнейшем будет "пилится" в микросервисы я бы взял redis как 
за простоту развертывания/кластеризацию "из каробки" и как следствие легкость в масштабировании


