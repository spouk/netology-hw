# Домашнее задание к занятию "12.7. «Репликация и масштабирование. Часть 2" - `Мартыненко Алексей`


### Задание 1
Опишите основные преимущества использования масштабирования методами:
◇ активный master-сервер и пассивный репликационный slave-сервер;
масштабирование методами репликацией - дает основное преимущество в виде отказоустойчивости

◇ master-сервер и несколько slave-серверов;
“размазывание” нагрузки общего пула обращений к “базе” между master и slave, т.к.по статистике наибольшее количество обращений это выборка данных
(чтение) , и с этой нагрузкой прекрасно справятся несколько slave серверов

◇ активный сервер со специальным механизмом репликации — distributed replicated block device (DRBD);
по сути это репликация любого блочного устройства, возможность переключения на реплику в случае падения основного блочного девайса,
дает высокую отказоустойчивость по факту

◇ SAN-кластер.
высокая пропускная способность дисковой системы в кластере,возможнось настройки репликации, и легкий процесс маштабирование
из особенностей, как правило всегда используется специализированный софт,заточенный для управлением кластером

### Задание 2
Разработайте план для выполнения горизонтального и вертикального шаринга базы данных. База данных состоит из трёх таблиц:
◇ пользователи,
◇ книги,
◇ магазины (столбцы произвольно).
```sql

create table users (
id int not null primary key autoincrement,
name varchar(200),
family varchar(200),
email varchar(200) unique,
password varchar(200),
login varchar(200) unique,
countbuy int,
ammount float
)

create table books (
id int not null primary key autoincrement,
name varchar(200),
description text,
cost float,
counts int,
countbuy int
)

create table shops (
id int not null primary key autoincrement,
address varchar(200),
creating datetime,
startwork datetime,
endwork datetime,
phone varchar(200)
)
```


вертикальный шардинг предполагает разнесения цельных таблиц по отдельным нодам - в данном случае нодой может выступить отдельный сервер с базой данных, 
в данном случае можно разнести 3 таблицы по 3 серверам соответственно


на представленной схеме - используется 3 сервера с базами данных, на каждую базу данных разнесена одна таблица (users, shops, books)
репликация в данном случае не используется, если нужно для увеличения отказоустойчивости и/или снижение временных затрат на обработку пула
запросов, можно добавить по 1-2 slave серверов с базами данных в режиме только для чтения по отношению к внешним подключениям


горизонтальный шардинг предполагает разнесения данных на уровне данных больших таблиц с учетом статистики(при ее наличии) по количеству обращений
к каждому полю, количества мест в кодовой базе бэкенда, где используются данные столбцов большой таблицы. Это делается для того, чтобы явно выделить часть столбцов наиболее часто используемых в один сервер с базой данных,а другую(не обязательно 1-2, разделение может быть больше 2, все
зависит от количество полей в таблице)


на представленной схеме используется вертикальный + горизонтальный шардинг, в горизонтальном аспекте было принято решение о шардировании
таблицы users по причине самого быстрого роста, учитывая, что размер таблиц с книгами (books) и магазинов (shops) имеют не столь интенсивный рост.  Users раздяляется учитывая частоту использование разных столбцов таблицы - в данном случае по каждому обращению нужны данные для проведения
авторизации (в авторизации используются данных  столбцов - email, login, password,и подтягивается id как уникальный идентификатор).
Во второй таблице users (которая размещена на db11) скинута остальная информация,которую запрашивают/изменяют значительно меньше).
Также следует отметить, что id в обеих таблицах users идентичны , для более оптимального и рационального использования коннектов к базам из
бэкенда


https://drive.google.com/file/d/1XH0r3aVBiGUSoTnbh6xLK0Y3dW_9H9Zo/view?usp=sharing




Дополнительные задания (со звёздочкой*)
Эти задания дополнительные, то есть не обязательные к выполнению, и никак не повлияют на получение вами зачёта по этому домашнему заданию. Вы можете их выполнить, если хотите глубже шире разобраться в материале.

### Задание 3*
Выполните настройку выбранных методов шардинга из задания 2.
Пришлите конфиг Docker и SQL скрипт с командами для базы данных.

