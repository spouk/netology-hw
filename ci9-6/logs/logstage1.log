[0KRunning with gitlab-runner 16.3.1 (f5dfa4d1)[0;m[0K  on fucker s6T1ps-ZW, system ID: s_c573dc8e1ae3[0;m
section_start:1695239962:prepare_executor
[0K[0K[36;1mPreparing the "shell" executor[0;m[0;m
[0KUsing Shell (bash) executor...[0;m
section_end:1695239962:prepare_executor
[0Ksection_start:1695239962:prepare_script
[0K[0K[36;1mPreparing environment[0;m[0;m
Running on gitlab-runner...
section_end:1695239962:prepare_script
[0Ksection_start:1695239962:get_sources
[0K[0K[36;1mGetting source from Git repository[0;m[0;m
[32;1mFetching changes with git depth set to 20...[0;m
Reinitialized existing Git repository in /home/gitlab-runner/builds/s6T1ps-ZW/0/cyberspouk/netologia-test/.git/
[32;1mChecking out 908c2a84 as detached HEAD (ref is main)...[0;m
[32;1mSkipping Git submodules setup[0;m
section_end:1695239963:get_sources
[0Ksection_start:1695239963:step_script
[0K[0K[36;1mExecuting "step_script" stage of the job script[0;m[0;m
[32;1m$ docker build -t $CI_REGISTRY/cyberspouk/netologia-test/python-api:latest .[0;m
#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile: 623B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/centos:7
#3 DONE 0.5s

#4 [1/8] FROM docker.io/library/centos:7@sha256:be65f488b7764ad3638f236b7b515b3678369a5124c47b8d32916d6487418ea4
#4 DONE 0.0s

#5 [2/8] WORKDIR /usr/src/cache
#5 CACHED

#6 [3/8] RUN yum install gcc openssl-devel bzip2-devel libffi-devel zlib-devel xz-devel wget make cmake lsof -y
#6 CACHED

#7 [4/8] RUN cd /usr/src; wget https://www.python.org/ftp/python/3.7.11/Python-3.7.11.tgz; tar xzf Python-3.7.11.tgz; cd Python-3.7.11; ./configure --enable-optimizations; make altinstall; rm /usr/src/Python-3.7.11.tgz
#7 CACHED

#8 [internal] load build context
#8 transferring context: 167B 0.0s done
#8 DONE 0.0s

#9 [5/8] RUN mkdir python_api
#9 DONE 0.3s

#10 [6/8] COPY python_api/requirements.txt python_api/requirements.txt
#10 DONE 0.2s

#11 [7/8] RUN pip3.7 install -r python_api/requirements.txt
#11 0.819 Collecting flask
#11 1.037   Downloading Flask-2.2.5-py3-none-any.whl (101 kB)
#11 1.210 Collecting flask_restful
#11 1.265   Downloading Flask_RESTful-0.3.10-py2.py3-none-any.whl (26 kB)
#11 1.343 Collecting flask_jsonpify
#11 1.401   Downloading Flask-Jsonpify-1.5.0.tar.gz (3.0 kB)
#11 1.707 Collecting itsdangerous>=2.0
#11 1.761   Downloading itsdangerous-2.1.2-py3-none-any.whl (15 kB)
#11 1.869 Collecting Jinja2>=3.0
#11 1.924   Downloading Jinja2-3.1.2-py3-none-any.whl (133 kB)
#11 2.167 Collecting importlib-metadata>=3.6.0; python_version < "3.10"
#11 2.221   Downloading importlib_metadata-6.7.0-py3-none-any.whl (22 kB)
#11 2.356 Collecting click>=8.0
#11 2.409   Downloading click-8.1.7-py3-none-any.whl (97 kB)
#11 2.552 Collecting Werkzeug>=2.2.2
#11 2.611   Downloading Werkzeug-2.2.3-py3-none-any.whl (233 kB)
#11 2.741 Collecting aniso8601>=0.82
#11 2.796   Downloading aniso8601-9.0.1-py2.py3-none-any.whl (52 kB)
#11 3.089 Collecting pytz
#11 3.143   Downloading pytz-2023.3.post1-py2.py3-none-any.whl (502 kB)
#11 3.390 Collecting six>=1.3.0
#11 3.446   Downloading six-1.16.0-py2.py3-none-any.whl (11 kB)
#11 3.667 Collecting MarkupSafe>=2.0
#11 3.723   Downloading MarkupSafe-2.1.3-cp37-cp37m-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (25 kB)
#11 3.831 Collecting typing-extensions>=3.6.4; python_version < "3.8"
#11 3.887   Downloading typing_extensions-4.7.1-py3-none-any.whl (33 kB)
#11 4.007 Collecting zipp>=0.5
#11 4.062   Downloading zipp-3.15.0-py3-none-any.whl (6.8 kB)
#11 4.096 Using legacy setup.py install for flask-jsonpify, since package 'wheel' is not installed.
#11 4.207 Installing collected packages: itsdangerous, MarkupSafe, Jinja2, typing-extensions, zipp, importlib-metadata, click, Werkzeug, flask, aniso8601, pytz, six, flask-restful, flask-jsonpify
#11 5.076     Running setup.py install for flask-jsonpify: started
#11 5.372     Running setup.py install for flask-jsonpify: finished with status 'done'
#11 5.407 Successfully installed Jinja2-3.1.2 MarkupSafe-2.1.3 Werkzeug-2.2.3 aniso8601-9.0.1 click-8.1.7 flask-2.2.5 flask-jsonpify-1.5.0 flask-restful-0.3.10 importlib-metadata-6.7.0 itsdangerous-2.1.2 pytz-2023.3.post1 six-1.16.0 typing-extensions-4.7.1 zipp-3.15.0
#11 5.666 WARNING: You are using pip version 20.1.1; however, version 23.2.1 is available.
#11 5.666 You should consider upgrading via the '/usr/local/bin/python3.7 -m pip install --upgrade pip' command.
#11 DONE 5.8s

#12 [8/8] COPY python_api/python-app.py python_api/python-app.py
#12 DONE 0.3s

#13 exporting to image
#13 exporting layers
#13 exporting layers 0.4s done
#13 writing image sha256:9f5174e7d58c2125e8205076ccd3c5af083185168da5976ffa013490bdb10a29 done
#13 naming to fucker.gitlab.yandexcloud.net:5050/cyberspouk/netologia-test/python-api:latest 0.0s done
#13 DONE 0.5s
[32;1m$ docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY[0;m
WARNING! Using --password via the CLI is insecure. Use --password-stdin.
WARNING! Your password will be stored unencrypted in /home/gitlab-runner/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
[32;1m$ docker push $CI_REGISTRY/cyberspouk/netologia-test/python-api:latest[0;m
The push refers to repository [fucker.gitlab.yandexcloud.net:5050/cyberspouk/netologia-test/python-api]
128c6079eaca: Preparing
05225ab58fc2: Preparing
7d54b76e6245: Preparing
d585ae195040: Preparing
9f96d3621d8b: Preparing
aeb94cf17ecf: Preparing
a44724142194: Preparing
174f56854903: Preparing
aeb94cf17ecf: Waiting
a44724142194: Waiting
174f56854903: Waiting
9f96d3621d8b: Layer already exists
aeb94cf17ecf: Layer already exists
a44724142194: Layer already exists
174f56854903: Layer already exists
d585ae195040: Pushed
7d54b76e6245: Pushed
128c6079eaca: Pushed
05225ab58fc2: Pushed
latest: digest: sha256:eeb1565dd350c5493ff3cf366044938bd635f8b435b3fd1f3e4dd55146182b86 size: 1994
section_end:1695239972:step_script
[0Ksection_start:1695239972:cleanup_file_variables
[0K[0K[36;1mCleaning up project directory and file based variables[0;m[0;m
section_end:1695239972:cleanup_file_variables
[0K[32;1mJob succeeded[0;m